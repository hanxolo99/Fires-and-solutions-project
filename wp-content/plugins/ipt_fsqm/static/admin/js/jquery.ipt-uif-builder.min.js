/*!
* eForm - WordPress Form Builder
*
* Autogenerated by Grunt on: 2019-01-08
* @version 3.8.0
* @author Swashata Ghosh (WPQuark)
* @license GPL-3.0
*/
!function(e){"use strict";var i={callbackUI:"iptPluginUIFAdmin",callbackOp:{applyUIOnly:!0}},t={init:function(a){e.extend(!0,{},i,a);return this.each(function(){t.applyBuilder.apply(this)})},applyBuilder:function(){var i=this,a=JSON.parse(e(i).find("input.ipt_uif_builder_keys").val());a=e.extend(!0,{},JSON.parse(e(i).find("input.ipt_uif_builder_default_keys").val()),a),e(i).data("ipt_uif_builder_keys",a);var r=JSON.parse(e(i).find("input.ipt_uif_builder_replace_string").val());e(i).data("ipt_uif_builder_replace",r);var n,l,d=e(this).find(".ipt_uif_builder_layout"),p=e(this).find("#ipt-eform-builder-toolbar-addcontainer");d.length&&(n=d[0],t.builderTabs.apply(n,[i])),p.length&&(l=p[0],t.builderAddTab.apply(l,[n,i])),e(this).find(".ipt_uif_droppable").each(function(){t.builderDraggables.apply(this,[n,i])}),e(this).find(".ipt_uif_builder_layout_settings_toolbar").each(function(){t.builderToolbar.apply(this,[n,i,l])});var o=e(this).find(".ipt_uif_builder_settings_box").eq(0);e(this).data("ipt_uif_builder_settings",o),o.removeData("ipt_uif_builder_settings_origin"),e(this).find("#ipt-eform-builder-settings-wrap").iptPluginUIFAdmin(),e("#ipt-eform-settings-tab-wrapper").hide();var _=o.next().find("button");t.builderSettingsSaveInit.apply(_,[o,i]),t.builderElementSettingsEvent.apply(this),e(this).find(".ipt_uif_builder_wp_editor").css({position:"absolute",left:-9999}).find("button.ipt_uif_button").on("click",function(){_.trigger("click")}),t.builderDeleteElement.apply(this,[i,o]),e(this).find(".ipt_uif_builder_deleter").each(function(){t.builderDeleter.apply(this,[o,i])}),e(this).on("click",".ipt_uif_builder_copy_handle",function(e){t.builderDuplicate.apply(this,[i,o])}),t.builderCustomizer(i),t.builderLivePreview(),t.builderSplitPane(),t.builderInitSaveAndSync(i)},builderInitSaveAndSync:function(i){var a,r=!1,n=e("#ipt-eform-builder-toolbar-save"),l=e("#ipt-eform-builder-toolbar .loader-viewer"),d=e(".ipt_uif > form"),p=function(i){r&&a.abort(),r=!0,n.addClass("active"),l.addClass("active");var t={action:d.find('[name="action"]').val(),ipt_ps_post:d.serialize(),ipt_ps_send_as_str:!0,ipt_ps_look_into:"ipt_ps_post"};a=e.post(ajaxurl,t).done(function(t){"cheating"===t?alert("Failed nonce verification. Please refresh this page."):(e(document).trigger("formSaved.eform"),"function"==typeof i&&i(t))}).fail(function(e,i){"abort"!==i&&alert("Could not connect to server.")}).always(function(){r=!1,n.removeClass("active"),l.removeClass("active")})};n.on("click",function(i){i.preventDefault(),e("#eform-builder-live-iframe-loading").stop(!0,!0).fadeIn(),p(function(e){t.fireIframeSyncEvents(e)})}),e(i).on(["customizerClose.eform"].join(" "),e.debounce(500,function(i){e("#eform-builder-live-iframe-loading").stop(!0,!0).fadeIn(),p(function(e){t.fireIframeSyncEvents(e)})})),e(i).on(["elementAdded.eform","elementDeleted.eform","elementCopied.eform","pageAdded.eform","pageDeleted.eform","pageCopied.eform","pageSorted.eform","settingsClose.eform"].join(" "),e.debounce(500,function(i){e("#eform-builder-live-iframe-loading").stop(!0,!0).fadeIn(),p(function(e){t.fireIframeSyncEvents(e)})})),e(i).on(["settingsOpen.eform"].join(" "),e.debounce(500,function(e,i){t.fireIframeElementEvent(i)})),e("#name").on("change",e.debounce(500,function(){e("#eform-builder-live-iframe-loading").stop(!0,!0).fadeIn(),p(function(e){t.fireIframeSyncEvents(e)})}));var o=!1,_=e("#ipt_fsqm_form_builder_layout");function s(e){var i=_.tabs("option","active");e&&e.currentTab!==i&&(o=!0,_.tabs("option","active",e.currentTab),o=!1)}_.on("tabsactivate",function(){o||t.fireIframeSyncEvents()}),e(document).on("tabSyncForward.eform",function(e,i){s(i)}),e(document).on("configForward.eform",function(i,t){var a=t.parts;t.currentTab;if(a&&a[2]&&a[3]){var r=a[2],n=a[3],l=e("#eform-form-element-settings-"+r+"-"+n);l.length&&(s(t),l.closest(".ipt_uif_droppable_element").find("> .ipt_uif_droppable_element_wrap > .ipt_uif_builder_settings_handle").trigger("click"))}}),e(document).on("elementSyncForward.eform",function(i,t){var a=t.parts;if(a&&a[2]&&a[3]){var r=a[2],n=a[3],l=e("#eform-form-element-settings-"+r+"-"+n);if(l.length){s(t);var d=l.closest(".ipt_uif_droppable_element");e(".ipt_uif_droppable_element.highlight").removeClass("highlight"),d.addClass("highlight");var p=d.closest(".ipt_uif_builder_layout_tabs_wrap"),o=p.scrollTop()+d.offset().top-p.offset().top-50;p.stop(!0,!0).animate({scrollTop:o},100)}}}),e(i).on("mouseenter",".ipt_uif_droppable_element_added",function(e){r||t.fireIframeElementEvent(this,!0)})},fireIframeElementEvent:function(i,a){var r=e(i);if(r.hasClass("ipt_uif_droppable_element")){a=!!a;var n=r.find(".ipt_uif_builder_helper.element_m_type").val(),l=r.find(".ipt_uif_builder_helper.element_key").val(),d={currentTab:e("#ipt_fsqm_form_builder_layout").tabs("option","active"),mType:n,key:l,now:a};t._fireSyncElement(d)}},_fireSyncElement:function(i){var t=e("#eform-builder-liveview-iframe");try{t[0].contentWindow.jQuery("body").trigger("syncElement.eform",i)}catch(e){t.one("load",function(){t[0].contentWindow.jQuery("body").trigger("syncElement.eform",i)})}},fireIframeSyncEvents:function(i){var a={html:"",currentTab:e("#ipt_fsqm_form_builder_layout").tabs("option","active")};i&&i.html&&(a.html=i.html),t._fireSyncEvent(a),e("#eform-builder-live-iframe-loading").stop(!0,!0).fadeOut()},_fireSyncEvent:function(i){var t=e("#eform-builder-liveview-iframe");try{t[0].contentWindow.jQuery("body").trigger("syncIframe.eform",i)}catch(e){t.one("load",function(){t[0].contentWindow.jQuery("body").trigger("syncIframe.eform",i)})}},builderDeleteElement:function(i,a){var r=e(this).find(".ipt_uif_builder_layout"),n=r.data("deldropper-title"),l=e("<div><p>"+r.data("deldropper-msg")+"</p></div>");e(this).on("click",".ipt_uif_builder_remove_handle",function(r){r.preventDefault();var d=e(this).closest(".ipt_uif_droppable_element"),p=d.parent();l.dialog({autoOpen:!0,buttons:{Confirm:function(){1===d.data("dbmap")&&d.data("ipt_uif_builder_dbmap_original").removeClass("ipt_uif_droppable_element_disabled");t.builderSettingsClose.apply(this,[i,a]),d.find(".ipt_uif_droppable_element_wrap").addClass("red"),d.animate({height:0,opacity:0},"normal",function(){p.find(".ipt_uif_droppable_element:not(.ui-sortable-placeholder):not(.ui-sortable-helper)").length<1&&p.addClass("ipt_uif_builder_drop_here_empty"),d.remove(),e(a).trigger("elementDeleted.eform")}),e(this).dialog("close")},Cancel:function(){e(this).dialog("close")}},modal:!0,minWidth:600,closeOnEscape:!0,title:n,create:function(i,t){e("body").addClass("ipt_uif_common")},close:function(i,t){e("body").removeClass("ipt_uif_common")}})})},builderSplitPane:function(){var i=[],t=e("#ipt-eform-builder-toolbar-split-pane-mode");t.find("a").each(function(){i.push(e(this).data("class"))});var a=e("#ipt-eform-builder-split-window");t.on("click","a",function(r){r.preventDefault(),i.forEach(function(e){a.removeClass(e)});var n=e(this);a.addClass(n.data("class")),t.find("a").removeClass("active"),n.addClass("active")});var r=e("#eform-split-view-left"),n=e("#eform-split-view-right"),l=e("#eform-split-view-resize"),d=e(".eform-builder-form-iframe"),p=function(){r.css({width:""}),n.css({width:""}),l.css({left:"calc(50% - 4px)"})};l.draggable({axis:"x",containment:"parent",drag:function(e,i){var t=a.width(),l=i.position.left/t*100,d=100-l;r.css({width:l+"%"}),n.css({width:"calc("+d+"% - 8px)"})},start:function(){d.addClass("overlayed")},stop:function(){d.removeClass("overlayed")}}),l.on("dblclick",p),e(window).on("resize",e.debounce(250,p))},builderCustomizer:function(i){var a=e("#ipt_fsqm_form_customization_wrap"),r=e("#ipt-eform-builder-toolbar-settings");t._builderAttachCustomizerOpen(i,a,r);var n=e("#ipt_fsqm_form_theme_settings_wrap"),l=e("#ipt-eform-builder-toolbar-theme");t._builderAttachCustomizerOpen(i,n,l);var d=e("body");e(document).on("click",".wpq-eform-main-settings-wrap .wpq-eform-main-settings-toolbar .ipt_uif_button, .wpq-eform-main-settings-wrap .wpq-eform-main-settings-close",function(t){t.preventDefault(),e(this).closest(".wpq-eform-main-settings-wrap").hide(),e(i).trigger("customizerClose.eform"),d.removeClass("eform-modal-active")})},_builderAttachCustomizerOpen:function(i,t,a){var r=e("body");a.on("click",function(a){a.preventDefault(),r.addClass("eform-modal-active"),t.show(),e(i).trigger("customizerOpen.eform")})},stopIframeLoadingAnimation:function(){e("#ipt-eform-builder-toolbar .loader-viewer").removeClass("active"),e("#ipt-eform-builder-toolbar-actions .refresher").removeClass("active"),e("#eform-builder-live-iframe-loading").stop(!0,!0).fadeOut()},startIframeLoadingAnimation:function(){e("#ipt-eform-builder-toolbar .loader-viewer").addClass("active"),e("#ipt-eform-builder-toolbar-actions .refresher").addClass("active"),e("#eform-builder-live-iframe-loading").stop(!0,!0).fadeIn()},refreshLiveIframe:function(){t.startIframeLoadingAnimation(),e(".eform-builder-form-iframe iframe").get(0).contentWindow.location.reload(!0)},builderLivePreview:function(){var i=e(".eform-builder-form-iframe"),a=i.find("iframe").get(0),r=a.contentDocument||a.contentWindow.document;i.find("iframe").on("load",function(){t.stopIframeLoadingAnimation(),t.fireIframeSyncEvents()}),"complete"===r.readyState&&e("#eform-builder-live-iframe-loading").stop(!0,!0).fadeOut(),e("#ipt-eform-builder-toolbar-iframe-size").on("click","a",function(t){t.preventDefault();var a,r=e(this);r.parent().find("a").removeClass("active"),r.addClass("active");var n=["fit","desktop","tablet","mobile"];for(a=0;a<n.length;a++)i.removeClass(n[a]);i.addClass(r.data("stretch"))}),e("#ipt-eform-builder-toolbar-actions .refresher").on("click",function(e){e.preventDefault(),t.refreshLiveIframe()}),e("#ipt_fsqm_form_customization").on("change dragstop sortstop slidestop",e.debounce(1e3,t.refreshLiveIframe))},builderTabs:function(i){var a=this,r=e(this).tabs();r.find("> .ui-tabs-nav").sortable({placeholder:"ipt_uif_builder_tabs_sortable_highlight",stop:function(){t.builderTabRefresh.apply(a),e(i).trigger("pageSorted.eform")},handle:".ipt_uif_builder_tab_sort",tolerance:"pointer",containment:"parent",distance:5,axis:"x"}),r.find("> .ui-tabs-panel").each(function(){t.builderDroppables.apply(this,[i])}),r.find("> .ui-tabs-nav li").each(function(){t.builderTabDroppable.apply(this,[i])});var n=e(this).find("> .ui-tabs-nav > li").length;e(this).data("ipt_uif_builder_tab_counter",n),0===n&&e(this).addClass("ipt_uif_builder_empty")},builderAddTab:function(i,a){e(this).on("click",function(r){r.preventDefault();var n=e(a).data("ipt_uif_builder_replace").l_key,l=e(a).find(".ipt_uif_builder_tab_content").text();l=e("<div></div>").html(l).text();var d=e(i).data("ipt_uif_builder_tab_counter"),p=new RegExp(t.quote(n),"g");l=l.replace(p,d);var o=e(i).attr("id")+"_"+d,_=e(i).attr("id")+"_li_"+d,s=e(a).find(".ipt_uif_builder_tab_li").text();s=e("<div></div>").html(s).text(),(s=e(s)).find(".tab_position").val(d),s.find("a").attr("href","#"+o),s.attr("id",_),e(i).find("> .ui-tabs-nav").append(s);var f=e('<div id="'+o+'">'+l+"</div>");f.attr("data-ipt-uif-builder-li",_),f.addClass("ipt_uif_builder_layout_tabs_wrap"),e(i).append(f),d++,t.builderTabDroppable.apply(s,[a]),e(i).data("ipt_uif_builder_tab_counter",d),e(i).removeClass("ipt_uif_builder_empty"),t.builderTabRefresh.apply(i),t.builderDroppables.apply(f,[a]),e(i).tabs("option","active",e(i).find("> .ui-tabs-nav > li").length-1),e(a).trigger("pageAdded.eform")})},builderTabDroppable:function(i){e(this).find(".ipt_uif_builder_tab_droppable").droppable({greedy:!0,accept:".ipt_uif_droppable_element",tolerance:"pointer",activate:function(i,t){e(this).addClass("ipt_uif_builder_tab_droppable_highlight")},deactivate:function(i,t){e(this).removeClass("ipt_uif_builder_tab_droppable_highlight")},over:function(i,t){e(this).addClass("ipt_uif_builder_tab_droppable_over")},out:function(i,t){e(this).removeClass("ipt_uif_builder_tab_droppable_over")},drop:function(a,r){var n=e("#"+e(this).parent().parent().attr("aria-controls")).find("> .ipt_uif_builder_drop_here").get(0),l=this,d=e(l).parent().parent().parent().parent(),p=e(l).parent().parent().parent().find("> li").index(e(l).parent().parent());d.tabs("option","active",p);t.builderHandleDrop.apply(n,[a,r,i,function(){e(l).removeClass("ipt_uif_builder_tab_droppable_highlight"),e(l).removeClass("ipt_uif_builder_tab_droppable_over")}])}})},builderTabRefresh:function(){e(this).tabs("refresh"),e(this).find("> .ui-tabs-nav").sortable("refresh"),e(this).find("> .ui-tabs-nav").sortable("refreshPositions"),0===e(this).find("> .ui-tabs-nav > li").length&&e(this).addClass("ipt_uif_builder_empty")},builderToolbar:function(i,a,r){e(this).find(".ipt_uif_builder_layout_settings").on("click",function(){var r=e(i).tabs("option","active"),n=e(i).find(".ui-tabs-nav li").eq(r).attr("aria-controls"),l=e(a).data("ipt_uif_builder_settings").get(0),d=e("#"+n).find(".ipt_uif_builder_tab_settings").get(0);t.builderSettingsOpen.apply(this,[l,a,d])}),e(this).find(".ipt_uif_builder_layout_copy").on("click",function(){var n=e(i).tabs("option","active"),l=e(i).find(".ui-tabs-nav li").eq(n).attr("aria-controls"),d=e(a).data("ipt_uif_builder_settings").get(0);t.builderSettingsClose.apply(this,[d,a]),e(r).trigger("click");var p=e(i).tabs("option","active"),o=e(i).find(".ui-tabs-nav li").eq(p).attr("aria-controls"),_=e("#"+l),s=e("#"+o),f=_.find(">.ipt_uif_builder_drop_here").clone(),u=s.find(">.ipt_uif_builder_drop_here"),b=u.data("containerKey");u.remove(),f.find('[data-dbmap="1"]').remove(),f.appendTo(s),t.builderDuplicateReplaceInnerKeys.apply(f,[a,b]),t.builderTabRefresh.apply(i),t.builderDroppables.apply(s,[a]),e(a).trigger("pageCopied.eform")}),e(this).find(".ipt_uif_builder_layout_del").on("click",function(){var r=e(this).data("title");e('<div><div style="padding: 10px;"><p>'+e(this).data("msg")+"</p></div></div>").dialog({autoOpen:!0,buttons:{Confirm:function(){var r=e(i).tabs("option","active"),n=e(i).find(".ui-tabs-nav li").eq(r).remove().attr("aria-controls");e(i).find("#"+n).remove(),t.builderTabRefresh.apply(i),e(this).dialog("close"),e(a).trigger("pageDeleted.eform")},Cancel:function(){e(this).dialog("close")}},modal:!0,minWidth:600,closeOnEscape:!0,title:r,create:function(i,t){e("body").addClass("ipt_uif_common")},close:function(i,t){e("body").removeClass("ipt_uif_common")}})})},builderSettingsOpen:function(i,a,r){if(t.builderSettingsClose.apply(this,[i,a]),a=e(a),(r=e(r)).length){var n=r.parent(),l=n.find("> .ipt_uif_droppable_element_wrap > .element_title_h3 > .element_name").html();l=l?n.find("> .ipt_uif_droppable_element_wrap > .element_title_h3 > .element_info").html()+l:"Page",l+=" Settings",e(i).data("ipt_uif_builder_settings_parent",n),n.next(".ipt_uif_droppable_element").length?e(".builder_settings_next").removeClass("disabled"):e(".builder_settings_next").addClass("disabled"),n.prev(".ipt_uif_droppable_element").length?e(".builder_settings_prev").removeClass("disabled"):e(".builder_settings_prev").addClass("disabled"),e(i).find(".ipt_uif_builder_settings_box_container").prepend(r),e(i).closest(".ipt_uif_builder_settings_box_parent").find("> .settings-heading > .settings-heading-text").html(l);var d=e(i).find("textarea.wp_editor").eq(0);if(d.length){e("#ipt-eform-settings-editor-li").show();var p,o=a.find(".ipt_uif_builder_wp_editor"),_=o.find("textarea").eq(0);"undefined"!=typeof tinyMCE&&(p=tinyMCE.get(_.attr("id")));var s=d.val();o.css({position:"static",left:"auto"}),p&&p instanceof tinymce.Editor&&!_.is(":visible")?(p.setContent(switchEditors.wpautop(s)),p.save({no_events:!0})):"undefined"!=typeof switchEditors?_.val(switchEditors.pre_wpautop(s)):_.val(s)}else e("#ipt-eform-settings-editor-li").hide();n.hasClass("ipt_uif_droppable_element")&&n.find("> .ipt_uif_droppable_element_wrap").addClass("white"),e(i).data("ipt_uif_builder_settings_origin",r),e("body").addClass("eform-modal-active"),e("#ipt-eform-builder-settings-wrap").show(),e("#ipt-eform-settings-tab-wrapper").show().tabs("option","active",0),e(i).parent().stop(!0,!0).css({height:"auto"}).hide().fadeIn("fast"),r.data("iptEformBuilderSettingsUI")||r.data("iptEformBuilderSettingsUI",r.iptPluginUIFAdmin({applyUIOnly:!0})),e(a).trigger("settingsOpen.eform",n)}},builderSettingsClose:function(i,a){var r=e(i).data("ipt_uif_builder_settings_origin"),n=e(i).data("ipt_uif_builder_settings_parent");if(void 0!==r&&void 0!==n){a=e(a);var l=e(i).find("textarea.wp_editor").eq(0);if(l.length){var d,p,o=a.find(".ipt_uif_builder_wp_editor textarea").eq(0).attr("id"),_=a.find(".ipt_uif_builder_wp_editor").find("textarea").eq(0);d="undefined"!=typeof tinyMCE?(p=tinyMCE.get(o))&&p instanceof tinymce.Editor&&!_.is(":visible")?switchEditors.pre_wpautop(p.getContent()):switchEditors.pre_wpautop(e("#"+o).val()):e("#"+o).val(),l.val(d),a.find(".ipt_uif_builder_wp_editor").css({position:"absolute",left:-9999})}n.hasClass("ipt_uif_droppable_element")&&n.find("> .ipt_uif_droppable_element_wrap").removeClass("white");var s,f,u=n.find("input.ipt_uif_builder_helper.element_m_type").val(),b=n.find("input.ipt_uif_builder_helper.element_key").val();if("layout"==u?e("#"+u+"_"+b+"_conditional_active").is(":checked")&&!e("#"+u+"_"+b+"_conditional_status").is(":checked")?(n.addClass("grayed"),e("#"+n.data("iptUifBuilderLi")).addClass("grayed")):(n.removeClass("grayed"),e("#"+n.data("iptUifBuilderLi")).removeClass("grayed")):e("#"+u+"_"+b+"_conditional_active").is(":checked")&&!e("#"+u+"_"+b+"_conditional_status").is(":checked")?n.find("> .ipt_uif_droppable_element_wrap").addClass("grayed"):n.find("> .ipt_uif_droppable_element_wrap").removeClass("grayed"),n.append(r),s=n.find(".element_m_type").val()+"_"+n.find(".element_key").val()+"_title",f=e("#"+s).val(),f=t.stripTags(f),n.hasClass("ipt_uif_droppable_element_added"))f&&"string"==typeof f&&(n.find("> .ipt_uif_droppable_element_wrap > h3.element_title_h3 > span.element_title").text(" : "+f.trim()),n.find("> .ipt_uif_droppable_element_wrap > h3.element_title_h3").attr("title",f.trim()));else if(n.hasClass("ipt_uif_builder_layout_tabs_wrap")){var c=n.data("ipt-uif-builder-li"),m=e("#"+c);f&&"string"==typeof f&&m.find(".ipt_uif_builder_tab_droppable_title").text(f.trim())}e(i).removeData("ipt_uif_builder_settings_origin"),e(i).removeData("ipt_uif_builder_settings_parent"),e("#ipt-eform-builder-settings-wrap").hide(),e("#ipt-eform-settings-tab-wrapper").hide(),e("body").removeClass("eform-modal-active"),e(i).parent().stop(!0,!0).hide(),e(".ipt_uif_droppable_element.highlight").removeClass("highlight"),e(a).trigger("settingsClose.eform",n)}},builderSettingsSaveInit:function(i,a){e(this).on("click",function(){t.builderSettingsClose.apply(this,[i,a])}),e(a).on("click",".builder_settings_prev",function(e){e.preventDefault(),t._builderSettingsNavigate(i.data("ipt_uif_builder_settings_parent"),"prev")}),e(a).on("click",".builder_settings_next",function(e){e.preventDefault(),t._builderSettingsNavigate(i.data("ipt_uif_builder_settings_parent"),"next")}),e(a).on("click",".builder_settings_save",function(e){e.preventDefault(),t.builderSettingsClose.apply(this,[i,a])})},_builderSettingsNavigate:function(e,i){if(e){var t="prev"===i?e.prev(".ipt_uif_droppable_element"):e.next(".ipt_uif_droppable_element");t.length&&t.find("> .ipt_uif_droppable_element_wrap > .ipt_uif_builder_settings_handle").trigger("click")}},builderElementSettingsEvent:function(){var i=this;e(i).on("click",".ipt_uif_droppable_element_wrap",function(a){if(!(e(this).find(".ipt_uif_builder_drop_here_inner").length&&e.contains(e(this).find(".ipt_uif_builder_drop_here_inner").get(0),a.target)||e(a.target).closest(".ipt_uif_builder_action_handle").length||e(this).closest("#ipt-eform-builder-droppables-container").length)){var r=e(this).closest(".ipt_uif_droppable_element").find("> .ipt_uif_builder_settings").get(0),n=e(i).data("ipt_uif_builder_settings").get(0);t.builderSettingsOpen.apply(this,[n,i,r])}}),e(i).on("click",".ipt_uif_builder_settings_handle",function(a){a.preventDefault();var r=e(this).closest(".ipt_uif_droppable_element").find("> .ipt_uif_builder_settings").get(0),n=e(i).data("ipt_uif_builder_settings").get(0);t.builderSettingsOpen.apply(this,[n,i,r])}),e(i).on("click",".ipt_uif_builder_droppable_handle",function(i){i.preventDefault(),e(this).hasClass("ipt_uif_builder_droppable_handle_open")?(e(this).removeClass("ipt_uif_builder_droppable_handle_open"),e(this).siblings(".ipt_uif_builder_drop_here").slideUp("normal")):(e(this).addClass("ipt_uif_builder_droppable_handle_open"),e(this).siblings(".ipt_uif_builder_drop_here").slideDown("normal"))})},builderDuplicate:function(i,a){t.builderSettingsClose.apply(this,[a,i]);var r,n=e(this).closest(".ipt_uif_droppable_element"),l=n.clone(),d=null;if(!n.data("dbmap")){var p=n.find("textarea"),o=l.find("textarea");if(p.length)for(var _=0;_<p.length;_++)e(o[_]).val(e(p[_]).val());l.find('[data-dbmap="1"]').remove(),r=t.builderDuplicateModifyElements(n,l,i),l.hide(),n.after(l),(d=l.find("> .ipt_uif_droppable_element_wrap > .ipt_uif_builder_drop_here")).length&&(d.each(function(){t.builderDuplicateReplaceInnerKeys.apply(this,[i,r])}),t.builderDroppables.apply(l.get(0),[i])),l.slideDown("fast"),e(i).trigger("elementCopied.eform")}},builderDuplicateModifyElements:function(i,t,a){var r=i.find("> input.ipt_uif_builder_helper.element_m_type").val(),n=(i.find("> input.ipt_uif_builder_helper.element_type").val(),parseInt(i.find("> input.ipt_uif_builder_helper.element_key").val(),10)),l=r+"\\["+n+"\\]",d=r+"_"+n+"_",p=e(a).data("ipt_uif_builder_keys"),o=0;void 0!==p[r]?(o=p[r],p[r]++):p[r]=o,e(a).data("ipt_uif_builder_keys",p),t.find(">.ipt_uif_builder_settings").find("input, textarea, select, button, datalist, keygen, output, label").each(function(){var i=e(this),t=i.attr("name"),a=i.attr("id"),n=i.attr("for");t&&i.attr("name",t.replace(new RegExp(l,"g"),r+"["+o+"]")),a&&i.attr("id",a.replace(new RegExp(d,"g"),r+"_"+o+"_")),n&&i.attr("for",n.replace(new RegExp(d,"g"),r+"_"+o+"_"))}),t.find("script.ipt_uif_sda_data").each(function(){var i=e(this).html().replace(new RegExp(l,"g"),r+"["+o+"]").replace(new RegExp(d,"g"),r+"_"+o+"_");e(this).html(i)}),t.find(".icons-selector").remove(),t.find(">input.ipt_uif_builder_helper.element_key").val(o),t.find("input.ipt_uif_builder_helper.element_identifier").attr("id","eform-form-element-settings-"+r+"-"+o);var _=t.find("> .ipt_uif_droppable_element_wrap > h3 > .element_info");return _.text(_.text().replace(n,o)),t.find(".ui-tabs-active").removeClass("ui-tabs-active"),o},builderDuplicateReplaceInnerKeys:function(i,a){e(this).data("containerKey",a);var r=a,n=e(this).data("replaceby")+"["+r+"][elements]";e(this).find(">.ipt_uif_droppable_element").each(function(){var a,r=e(this);a=t.builderDuplicateModifyElements(r,r,i),r.find("> input.ipt_uif_builder_helper.element_m_type").attr("name",n+"[m_type][]"),r.find("> input.ipt_uif_builder_helper.element_type").attr("name",n+"[type][]"),r.find("> input.ipt_uif_builder_helper.element_key").attr("name",n+"[key][]");var l=r.find("> .ipt_uif_droppable_element_wrap > .ipt_uif_builder_drop_here");l.length&&l.each(function(){t.builderDuplicateReplaceInnerKeys.apply(this,[i,a])})})},builderDraggables:function(i,a){e(this).find(".ipt_uif_droppable_element").draggable({revert:"invalid",revertDuration:200,helper:"clone",zIndex:9999,appendTo:e(this),cancel:".ipt_uif_droppable_element_disabled",handle:".ipt_uif_builder_sort_handle",cursorAt:{left:19,top:17},delay:100}),e(this).on("click",".ipt_uif_droppable_element",function(r){if(!e(this).hasClass("ipt_uif_droppable_element_disabled")){if(e(".ipt_uif_builder_empty").length)try{e("#ipt-eform-builder-toolbar-addcontainer").trigger("click"),console.warn("Added an empty container, since none was found. eForm")}catch(e){}var n=e(this).clone(),l=e(this),d=e(i).tabs("option","active"),p=e(i).find(">ul>li.ipt_uif_builder_layout_tabs").eq(d).attr("aria-controls"),o=e("#"+p).find("> .ipt_uif_builder_drop_here");t.builderHandleDrop.apply(o.get(0),[null,{draggable:l,helper:n},a])}}),e(this).on("click",".ipt_uif_droppable_elements_parent",function(){var i=e(this),t=i.closest(".ipt_uif_droppable"),a=t.find(".ipt_uif_droppable_back"),r=t.find(".ipt-eform-builder-sidebar-droppable-head");t.find(".ipt_uif_droppable_elements_parent").stop(!0,!0).hide(),i.next(".ipt_uif_droppable_elements_wrap").stop(!0,!0).fadeIn("fast"),a.show(),r.hide()}),e(this).on("click",".ipt_uif_droppable_back",function(i){i.preventDefault();var t=e(this),a=t.closest(".ipt_uif_droppable");a.find(".ipt_uif_droppable_elements_wrap").stop(!0,!0).hide(),a.find(".ipt-eform-builder-sidebar-droppable-head").show(),a.find(".ipt_uif_droppable_elements_parent").stop(!0,!0).hide().fadeIn("fast"),t.hide()})},builderDroppables:function(i){e(this).find(".ipt_uif_builder_drop_here").droppable({greedy:!0,accept:".ipt_uif_droppable_element",tolerance:"pointer",activate:function(i,t){e(this).addClass("ipt_uif_highlight")},deactivate:function(i,t){e(this).removeClass("ipt_uif_highlight")},over:function(i,t){e(this).addClass("ipt_uif_droppable_hover"),t.helper.find(".ipt_uif_droppable_element_wrap").addClass("white")},out:function(i,t){e(this).removeClass("ipt_uif_droppable_hover"),t.helper.find(".ipt_uif_droppable_element_wrap").removeClass("white")},drop:function(e,a){t.builderHandleDrop.apply(this,[e,a,i])}}).sortable({items:"> .ipt_uif_droppable_element",handle:"> div > a.ipt_uif_builder_sort_handle",helper:function(i,t){var a=t.attr("class"),r=t.find("> .ipt_uif_droppable_element_wrap"),n=e('<div class="'+a+'"><div class="'+r.attr("class")+'"></div></div>');return n.addClass("ui-sortable-helper"),r.find("> a.ipt_uif_builder_action_handle").each(function(){n.find("> .ipt_uif_droppable_element_wrap").append(e(this).clone())}),n.find("> .ipt_uif_droppable_element_wrap").append(r.find("> h3").clone()).append('<div class="clear"></div>'),n.appendTo(e(this))},cancel:".ipt_uif_droppable_element_cancel_sort",cursorAt:{left:19,top:17},stop:function(i,t){if(t.item.hasClass("ipt_uif_droppable_element_move")){var a=e(this),r=t.item.data("ipt_uif_droppable_move");t.item.removeClass("ipt_uif_droppable_element_move");var n=t.item.parent();t.item.slideUp("fast",function(){t.item.appendTo(r).slideDown("fast",function(){n.find(".ipt_uif_droppable_element:not(.ui-sortable-placeholder):not(.ui-sortable-helper)").length<1&&n.addClass("ipt_uif_builder_drop_here_empty"),r.sortable("refresh"),a.sortable("refresh")})})}}}),e(this).find(".ipt_uif_droppable_element").each(function(){if(1===e(this).data("dbmap")){var t=e(this).attr("class"),a=e(i).find(".ipt_uif_droppable .ipt_uif_droppable_element").filter('[class="'+t+'"]').addClass("ipt_uif_droppable_element_disabled");e(this).data("ipt_uif_builder_dbmap_original",a)}e(this).addClass("ipt_uif_droppable_element_added")})},builderHandleDrop:function(i,a,r,n){var l;a.helper.find(".ipt_uif_droppable_element_wrap").removeClass("white"),e(this).removeClass("ipt_uif_highlight"),e(this).removeClass("ipt_uif_droppable_hover");var d=e(this).data("containerKey");if(a.draggable.hasClass("ipt_uif_droppable_element_added")){l=a.draggable;var p=e(this).data("replaceby")+"["+e(this).data("containerKey")+"][elements]";if(l.find("> input.element_m_type").attr("name",p+"[m_type][]"),l.find("> input.element_type").attr("name",p+"[type][]"),l.find("> input.element_key").attr("name",p+"[key][]"),e(this).is(l.parent()));else{var o=e(this);l.data("ipt_uif_droppable_move",o),l.addClass("ipt_uif_droppable_element_move")}}else{var _=(l=a.draggable.clone()).find("> .ipt_uif_builder_settings"),s=e('<div class="ipt_uif_builder_settings"></div>'),f=s.html(_.text()).text();s.html(f),_.remove(),l.find(".ipt_uif_droppable_element_wrap").before(s);var u=e(r).data("ipt_uif_builder_keys"),b=e(r).data("ipt_uif_builder_replace"),c=a.draggable.data("replacethis"),m=e(this).data("replaceby"),h=0,v=l.find(".element_m_type").val();void 0!==u[v]?(h=u[v],u[v]++):u[v]=h;var g=new RegExp(t.quote(b.key),"g"),y=new RegExp(t.quote(b.l_key),"g"),w=new RegExp(t.quote(c),"g");l.html(function(e,i){var t=i.replace(g,h);return(t=t.replace(w,m)).replace(y,d)}),l.find("> input.element_m_type").attr("disabled",!1),l.find("> input.element_type").attr("disabled",!1),l.find("> input.element_key").attr("disabled",!1),1===l.data("dbmap")&&(a.draggable.addClass("ipt_uif_droppable_element_disabled"),l.data("ipt_uif_builder_dbmap_original",a.draggable)),l.addClass("ipt_uif_droppable_element_added"),l.hide(),e(this).append(l),l.find(".ipt_uif_builder_drop_here").length&&t.builderDroppables.apply(l.get(0),[r]);var C=l.find(".element_m_type").val()+"_"+l.find(".element_key").val()+"_title",k=l.find("#"+C).val();(k=t.stripTags(k))&&"string"==typeof k&&(l.find("> .ipt_uif_droppable_element_wrap > h3.element_title_h3 > span.element_title").text(" : "+k.trim()),l.find("> .ipt_uif_droppable_element_wrap > h3.element_title_h3").attr("title",k.trim())),l.slideDown("fast"),e(r).data("ipt_uif_builder_keys",u)}e(this).removeClass("ipt_uif_builder_drop_here_empty"),e(r).trigger("elementAdded.eform"),"function"==typeof n&&n()},quote:function(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},stripTags:function(i){var t,a=e("<div />");return a.html(i),t=a.text(),a.remove(),t},testImage:function(e){return/\.(gif|jpg|jpeg|tiff|png)$/i.test(e)}};e.fn.iptUIFBuilder=function(i){return t[i]?t[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?(e.error("Method "+i+" does not exist on jQuery.iptUIFBuilder"),this):t.init.apply(this,arguments)}}(jQuery),jQuery(document).ready(function(e){});